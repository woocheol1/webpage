## 현재 처리한 버그

### HTML/CSS 에디터 커서 기반 미리보기 기능 수정

1. **오류 수정**
   - scrollToHtmlElement 함수의 중복 코드 및 문법 오류 수정
   - "는 속성 검색" 텍스트가 코드 내에 잘못 포함되어 발생하는 오류 해결
   - 정규식 매칭 예외 처리 추가
   - updateSourceMap is not defined 오류 수정 (sourcemap 관련 함수를 preview.js에 직접 추가)
   - scrollPreviewToCursorPosition, scrollToHtmlElement, scrollToCssElement 함수에 매개변수 검증 추가하여 TypeError 방지

2. **기능 개선**
   - 줄 번호 표시 기능 추가 (편집 중인 코드의 줄 번호를 에디터 왼쪽에 표시)
   - 활성 줄 하이라이트 기능 (현재 커서가 위치한 줄 번호를 강조 표시)
   - 줄 번호 기반 요소 검색 기능 (태그 또는 선택자 매칭 대신 줄 번호 기반으로 요소 찾기)
   - iframe 내부 스크롤 개선 (전체 페이지가 아닌 iframe 내부만 스크롤되도록 수정)
   - 요소 매칭 알고리즘 개선 (소스맵의 줄 번호 정보를 활용하여 더 정확한 요소 매칭)

3. **사용자 경험 개선**
   - 에디터와 미리보기 화면 간의 직관적인 연결성 강화
   - 클래스명이 중복된 경우에도 정확한 요소 검색 가능
   - 시각적인 피드백 강화 (활성 줄 하이라이트, 요소 하이라이트)

4. **향후 추가 발전 계획**
   - 커서 기반 스크롤 기능 개선: 유사도 점수 알고리즘 효율화
   - 에디터 상태 변화에 따른 미리보기 스크롤 자동 갱신 기능 개선
   - 하이라이트 효과 사용자 설정 기능 추가
   - 줄 번호 클릭 시 해당 요소로 직접 이동하는 기능 추가
   - 코드 폴딩(접기/펼치기) 기능 추가

### 폴더 구조
이미지 도구는 다음 경로에 구현합니다:
- 주요 페이지: `C:\Users\PC\Desktop\cursor\webpage\toolpage\tools\image-tools.html`
- 이미지 도구 관련 파일: `C:\Users\PC\Desktop\cursor\webpage\toolpage\tools\image-tools\` 폴더

### 기본 계획 기능
1. **이미지 리사이징** - 사용자가 지정한 너비/높이로 이미지 크기 조정
2. **이미지 회전** - 90°, 180°, 270° 회전 및 자유 각도 회전
3. **이미지 필터 적용** - 희백, 세피아, 반전, 블러 등 다양한 필터 적용
4. **이미지 자르기** - 이미지의 특정 영역 선택 및 자르기
5. **이미지 포맷 변환** - JPG, PNG, GIF, WebP 등 다양한 포맷으로 변환
6. **이미지 압축** - 이미지 용량을 줄이는 압축 기능(품질 조절 가능)
7. **워터마크 추가** - 텍스트나 다른 이미지를 워터마크로 추가
8. **밝기, 대비, 채도 조절** - 이미지의 기본적인 색상 속성 조절
9. **간단한 드로잉 도구** - 이미지 위에 선, 도형, 텍스트 추가

### 추가 계획 기능
1. **색상 추출** - 이미지에서 주요 색상 및 색상 팔레트 추출
2. **이미지 메타데이터 편집** - EXIF 정보를 포함한 이미지 메타데이터 확인 및 편집
3. **이미지 병합** - 여러 이미지를 가로/세로로 연결하여 하나의 이미지로 병합
4. **이미지 모자이크/흐림 처리** - 특정 영역을 모자이크나 흐림 처리
5. **이미지 프레임/테두리 추가** - 다양한 프레임과 테두리 효과 추가
6. **이미지 성능 최적화** - 웹 사용을 위한 이미지 최적화 (WebP 변환, 적절한 압축 등)
7. **이미지 효과/스타일 적용** - 만화, 유화, 스케치 등 다양한 예술적 스타일 적용

### 구현 방식
이미지 도구는 다음 기술을 사용하여 클라이언트 측에서 구현합니다:
- HTML5 Canvas API
- JavaScript
- FileReader API
- Blob 및 File API
- 외부 API 사용 없이 순수 클라이언트 측에서만 작동

### 구현 계획 파일
- `image-tools.html`: 주요 이미지 도구 페이지
- `image-tools/main.js`: 이미지 도구 코어 기능 구현
- `image-tools/resizer.js`: 이미지 리사이징 관련 기능
- `image-tools/filters.js`: 이미지 필터 및 효과 관련 기능
- `image-tools/cropper.js`: 이미지 자르기 관련 기능
- `image-tools/converter.js`: 이미지 포맷 변환 및 압축 관련 기능
- `image-tools/metadata.js`: 이미지 메타데이터 추출 및 처리 관련 기능
- `image-tools/color-extractor.js`: 이미지 색상 추출 관련 기능
- `image-tools/styles.css`: 이미지 도구 스타일시트

### 구현 일정
1. 기본 페이지 및 레이아웃 구현 - 2시간
2. 이미지 파일 업로드 및 표시 기능 - 2시간
3. 이미지 리사이징 및 회전 기능 - 4시간
4. 이미지 필터 및 색상 조정 기능 - 5시간
5. 이미지 자르기 기능 - 4시간
6. 이미지 포맷 변환 및 압축 기능 - 3시간
7. 이미지 메타데이터 추출 및 편집 기능 - 5시간
8. 이미지 색상 추출 기능 - 3시간
9. 테스트 및 버그 수정 - 4시간

전체 예상 개발 기간: 32시간 (약 4일)# 다기능 웹페이지 프로젝트 계획서 (업데이트)

## 프로젝트 개요
- 목표: 다양한 기능을 사용할 수 있는 HTML 기반 웹페이지 제작
- 경로: C:\Users\PC\Desktop\cursor\webpage\toolpage

## 주요 기능 계획
1. 피치 조정 비율 계산기 (기존 코드 기반)
2. 텍스트 도구 (대문자/소문자 변환, 문자 수 계산 등)
3. 이미지 도구 (이미지 리사이징, 회전 등)
4. 파일 변환 도구 (텍스트 인코딩 변환 등)
5. 시간 및 날짜 계산기
6. 단위 변환기
7. 색상 선택 및 변환 도구
8. 랜덤 생성 도구 (비밀번호, 텍스트 등)
9. HTML/CSS 에디터 (실시간 미리보기 기능)

## 진행 상황
- [x] 프로젝트 폴더 생성: C:\Users\PC\Desktop\cursor\webpage\toolpage
- [x] 프로젝트 계획서 작성
- [x] 메인 페이지 생성 (index.html)
- [x] 공통 CSS 파일 생성 (styles.css)
- [x] 공통 JavaScript 파일 생성 (common.js)
- [x] 피치 조정 비율 계산기 구현
- [x] 텍스트 도구 구현
- [o] HTML/CSS 에디터 구현 (진행 중)
  - [x] 메인 페이지에 HTML/CSS 에디터 버튼 추가
  - [x] 기본 페이지 레이아웃 구현 (html-editor.html)
  - [x] 실시간 미리보기 기능 구현 (preview.js)
  - [x] 저장 및 불러오기 기능 구현 (storage.js)
  - [x] 프로젝트 템플릿 구현 (templates.js)
  - [x] 코드 하이라이팅 기능 구현 (highlighter.js)
  - [x] 코드 하이라이팅 토글 기능 추가
  - [x] 유틸리티 함수 추가 (editor_utils.js)
  - [x] 미리보기 전체 화면 기능 추가
  - [ ] 코드 검증 기능 구현 (validator.js)
  - [ ] 반응형 미리보기 도구 구현 (responsive-tools.js)
- [ ] 추가 기능 구현

## HTML/CSS 에디터 세부 계획 (업데이트)

### 폴더 구조
HTML/CSS 에디터는 다음 경로에 구현합니다:
- 주요 페이지: `C:\Users\PC\Desktop\cursor\webpage\toolpage\tools\html-editor.html`
- 에디터 관련 파일: `C:\Users\PC\Desktop\cursor\webpage\toolpage\tools\html-css-editor\` 폴더

### 구현된 기능
1. **기본 페이지 및 레이아웃**: 화면 분할, 탭 전환, 에디터 영역과 미리보기 영역 구성
2. **실시간 미리보기**: 코드 변경 시 지연 시간을 두고 미리보기 업데이트
3. **저장 및 불러오기**: 
   - 로컬 스토리지를 활용한 프로젝트 저장 및 불러오기
   - 자동 저장 기능
   - 마지막 세션 복구 기능
   - URL 공유 기능
   - 프로젝트 내보내기/가져오기 기능
   - 백업 및 복원 기능
4. **템플릿 시스템**: 
   - 빈 템플릿
   - 기본 HTML 페이지 템플릿
   - 사용자 정의 템플릿 저장 및 관리
5. **설정 관리**: 테마 설정, 에디터 설정, 자동 저장 설정 등
6. **디버깅 및 로깅**: 활동 로그 기록 및 디버그 도구
7. **코드 하이라이팅 기능**:
   - HTML, CSS, JavaScript 언어별 구문 강조 표시
   - 라이트/다크 테마 지원
   - 토글 버튼을 통한 활성화/비활성화
8. **미리보기 전체 화면 기능**:
   - 미리보기 화면을 전체 화면으로 확대
   - 에디터 영역을 숨기고 결과만 확인 가능
   - 손쉽게 돌아가기 버튼 제공
   - 반응형 디자인 검증에 유용
9. **커서 위치 기반 미리보기 스크롤 기능**:
   - 에디터에서 커서가 있는 부분으로 미리보기 위치 자동 이동
   - HTML 텍스트에서 해당 태그가 있는 위치로 스크롤
   - CSS 텍스트에서 해당 선택자가 적용된 요소로 스크롤
   - 매칭된 요소 일시적 하이라이트 표시

### 구현 예정 기능
1. **코드 검증 기능 (validator.js)**
   - 주요 기능: HTML, CSS 코드 유효성 검사
   - 사용 기술: HTML5 및 CSS3 규칙 기반 검증
   - 구현 범위:
     - 실시간 문법 검사
     - 오류 위치 하이라이트
     - 오류 메시지 표시
     - 수정 제안 제공
   - 예상 소요 시간: 6-10시간

2. **반응형 미리보기 도구 (responsive-tools.js)**
   - 주요 기능: 다양한 화면 크기에서 미리보기 제공
   - 구현 범위:
     - 데스크톡, 태블릿, 모바일 등 프리셋 화면 크기
     - 사용자 정의 화면 크기 지원
     - 가로/세로 모드 전환
     - 미리보기 창 크기 조절
   - 예상 소요 시간: 3-6시간

3. **코드 스니펙 기능 (snippets.js)**
   - 주요 기능: 자주 사용하는 코드 조각 저장 및 재사용
   - 구현 범위:
     - 스니펙 생성 및 저장
     - 카테고리별 분류
     - 검색 기능
     - 드래그 앤 드롭 삽입
   - 예상 소요 시간: 5-8시간

### 테스트 계획

- 각 기능별 단위 테스트 수행
- 브라우저 호환성 테스트 (Chrome, Firefox, Safari, Edge)
- 로컬 스토리지 제한 및 예외 상황 테스트
- 사용자 경험 테스트 (직관성, 응답성 확인)

## 커서 기반 미리보기 스크롤 기능 구현 내역

### 구현 목적
에디터에서 코드를 작성하거나 편집할 때, 현재 커서가 위치한 부분의 코드가 실제 화면에서 어떻게 표시되는지 쉽게 확인할 수 있도록 구현한 기능입니다. 이를 통해 작업 효율을 높이고 코드의 실시간 적용 효과를 즐겁게 확인할 수 있습니다.

### 구현 방식
1. **커서 위치 추적**
   - 텍스트 에디터의 커서 위치 감지 및 정보 저장
   - 클릭, 키보드, 탭 전환 등 다양한 이벤트에 대한 위치 갱신
   
2. **태그/선택자 분석**
   - HTML: 커서 위치의 태그 이름 추출 및 검색
   - CSS: 선택자 추출 및 분석
   
3. **매칭 알고리즘**
   - 추출된 태그/선택자에 대해 미리보기 문서에서 유사도 배점 방식으로 요소 찾기
   - 텍스트 내용, HTML 구조 등을 고려한 훌륭한 매칭 기능

4. **스크롤 및 하이라이트**
   - 매칭된 요소로 스크롤
   - 일시적인 시각화 효과로 요소 하이라이트

### 구현 파일
- `preview.js`: 기존 미리보기 기능에 커서 기반 스크롤 기능 추가

## 참고사항
- 각 파일은 17kb를 초과하지 않도록 설계
- 각 기능은 모듈화하여 별도의 JavaScript 파일로 관리
- 로그 정보는 C:\Users\PC\Desktop\cursor\excel\func\logs에 저장
- 각 기능 구현 시 콘솔 로그를 남기도록 하여 디버깅 용이하게 설계
   - 프로젝트 내보내기/가져오기 기능
   - 백업 및 복원 기능
4. **템플릿 시스템**: 
   - 빈 템플릿
   - 기본 HTML 페이지 템플릿
   - 사용자 정의 템플릿 저장 및 관리
5. **설정 관리**: 테마 설정, 에디터 설정, 자동 저장 설정 등
6. **디버깅 및 로깅**: 활동 로그 기록 및 디버그 도구
7. **코드 하이라이팅 기능**:
   - HTML, CSS, JavaScript 언어별 구문 강조 표시
   - 라이트/다크 테마 지원
   - 토글 버튼을 통한 활성화/비활성화
8. **미리보기 전체 화면 기능**:
   - 미리보기 화면을 전체 화면으로 확대
   - 에디터 영역을 숨기고 결과만 확인 가능
   - 손쉽게 돌아가기 버튼 제공
   - 반응형 디자인 검증에 유용

### 구현 예정 기능
1. **코드 하이라이팅**: 문법에 따라 코드를 색상으로 구분
2. **코드 검증**: HTML/CSS 문법 오류 체크 및 표시
3. **반응형 디자인 미리보기**: 다양한 화면 크기로 미리보기 전환
4. **CSS 프레임워크 통합**: 인기 있는 프레임워크를 쉽게 적용할 수 있는 템플릿
5. **코드 스니펫 라이브러리**: 자주 사용하는 코드 조각 저장 및 재사용
6. **색상 선택기 및 CSS 도구**: 시각적 도구를 통한 CSS 작성 지원
7. **이미지/아이콘 삽입 도구**: 일반적인 아이콘이나 이미지 삽입 지원
8. **애니메이션 생성기**: CSS 애니메이션 시각적 생성 도구

### 구현된 파일 목록
- `html-editor.html`: 주요 HTML/CSS 에디터 페이지
- `html-css-editor/editor.js`: 에디터 코어 기능 구현
- `html-css-editor/preview.js`: 미리보기 관련 기능
- `html-css-editor/storage.js`: 저장 및 불러오기 기능 (총 11개 파일 병합)
- `html-css-editor/templates.js`: 기본 템플릿 저장
- `html-css-editor/styles.css`: 에디터 스타일시트

## Storage.js 구현 세부 내역

### 주요 기능 내역
Storage.js 파일은 총 11개 파일로 분할 작업 후 병합하여 구현했으며, 다음과 같은 기능들을 제공합니다:

1. **프로젝트 관리**
   - 프로젝트 저장: 사용자가 작성한 HTML, CSS, JS 코드를 로컬 스토리지에 저장
   - 프로젝트 불러오기: 저장된 프로젝트를 에디터에 다시 로드
   - 프로젝트 삭제: 더 이상 필요하지 않은 프로젝트 제거

2. **세션 관리**
   - 자동 저장: 설정된 시간 간격으로 현재 작업 자동 저장
   - 마지막 세션 복구: 페이지 재방문 시 이전 작업 상태 복원
   - 종료 시 저장: 페이지를 떠날 때 현재 상태 자동 저장

3. **공유 및 내보내기**
   - URL 공유: 작성한 코드를 URL 형태로 공유
   - 파일 내보내기: 프로젝트를 JSON 파일로 내보내기
   - 파일 가져오기: 내보낸 파일에서 프로젝트 복원

4. **백업 및 복원**
   - 전체 백업: 모든 프로젝트를 단일 파일로 백업
   - 백업 복원: 백업 파일에서 모든 프로젝트 복원
   - 스토리지 관리: 로컬 스토리지 사용량 모니터링 및 정리

5. **설정 관리**
   - 에디터 설정: 테마, 들여쓰기, 자동 완성 등 설정
   - 자동 저장 설정: 자동 저장 간격 및 활성화 여부 설정
   - 미리보기 설정: 미리보기 지연 시간 등 설정

6. **로깅 및 디버깅**
   - 활동 로그: 사용자 활동 기록 및 저장
   - 디버그 정보: 문제 해결을 위한 상세 정보 수집
   - 오류 처리: 다양한 예외 상황에 대한 대응

### 파일 구조 (개발 과정)
Storage.js 개발을 위해 다음과 같이 파일을 분할하여 작업했습니다:

1. storage_part1.js: 기본 설정 및 초기화 코드 (825자)
2. storage_part2.js: 저장 대화상자 관련 기능 (4,100자)
3. storage_part3.js: 불러오기 대화상자 관련 기능 (3,200자)
4. storage_part4.js: 프로젝트 저장 및 로드 관련 코어 기능 (3,900자)
5. storage_part5.js: 최근 프로젝트 관리 기능 (3,000자)
6. storage_part6.js: 자동 저장 및 세션 복구 기능 (5,000자)
7. storage_part7.js: 내보내기 및 가져오기 기능 (7,000자)
8. storage_part8.js: 로컬 스토리지 관리 및 유틸리티 함수 (7,200자)
9. storage_part9.js: URL 공유 및 백업/복원 기능 (10,000자)
10. storage_part10a.js: 로깅, 디버깅 및 설정 기능 - 첫 번째 부분 (7,200자)
11. storage_part10b.js: 로깅, 디버깅 및 설정 기능 - 두 번째 부분 (7,000자)

최종 storage.js 파일 크기: 약 83KB

## Highlighter.js 구현 세부 내역

### 주요 기능 내역
Highlighter.js 파일은 HTML, CSS, JavaScript 코드의 구문 강조 표시 기능을 제공합니다. 다음과 같은 기능들이 구현되었습니다:

1. **언어별 구문 강조**
   - HTML 태그, 속성, 코멘트 등 구문 별 색상 지정
   - CSS 선택자, 속성, 값 등 구문 별 색상 지정
   - JavaScript 키워드, 문자열, 함수 등 구문 별 색상 지정

2. **테마 시스템**
   - 라이트 테마와 다크 테마 지원
   - 언어별 구문 요소에 대한 테마별 색상 정의
   - 테마 전환 기능 지원

3. **실시간 하이라이팅**
   - 코드 편집 시 실시간으로 구문 강조 적용
   - 성능 최적화를 위한 디바운스 처리
   - 에디터와 미리보기 요소 간 연동

4. **디버깅 및 로깅**
   - 디버그 모드 설정 옵션
   - 로깅 기능으로 오류 추적 및 디버깅 지원

### 구현 내용
코드 하이라이팅은 다음과 같은 방식으로 구현되었습니다:

1. **정규식 기반 토큰 분석**
   - 각 언어별로 구문 요소를 정규식으로 정의
   - 코드 문자열을 분석하여 토큰 위치 및 유형 식별

2. **색상 적용 알고리즘**
   - 토큰 위치 기반 색상 매핑
   - 중첩된 토큰 처리 로직
   - 테마별 색상 스키마 적용

3. **API 설계**
   - 단일 코드 처리 함수 (apply)
   - 실시간 하이라이팅 설정 (setupLive)
   - 테마 설정 및 가져오기 (theme.set, theme.get)
   - 디버깅 모드 설정 (debug)

### 사용 방법
1. HTML/CSS/JavaScript 코드의 직접 하이라이팅:
   ```javascript
   // HTML 코드 하이라이팅
   const highlightedHtml = Highlighter.highlight.html(htmlCode);
   
   // CSS 코드 하이라이팅
   const highlightedCss = Highlighter.highlight.css(cssCode);
   
   // JavaScript 코드 하이라이팅
   const highlightedJs = Highlighter.highlight.js(jsCode);
   ```

2. DOM 요소에 하이라이팅 적용:
   ```javascript
   // 코드 하이라이팅 적용
   Highlighter.apply(displayElement, code, 'html');
   ```

3. 실시간 하이라이팅 설정:
   ```javascript
   // 코드 편집기와 디스플레이 요소 간 실시간 하이라이팅 설정
   const cleanup = Highlighter.setupLive(editorElement, displayElement, 'js', 300);
   ```

## 다음 작업 계획

### 우선순위 작업

1. **HTML/CSS 에디터에 코드 하이라이팅 기능 적용**
   - editor.js 파일에 highlighter.js 적용
   - 코드 하이라이팅 토글 기능 추가
   - 테마에 따른 하이라이팅 색상 변경 기능
   - 예상 소요 시간: 2-3시간

2. **코드 검증 기능 구현 (validator.js)**
   - 주요 기능: HTML, CSS 코드 유효성 검사
   - 사용 기술: HTML5 및 CSS3 규칙 기반 검증
   - 구현 범위:
     - 실시간 문법 검사
     - 오류 위치 하이라이트
     - 오류 메시지 표시
     - 수정 제안 제공
   - 예상 소요 시간: 6-10시간

3. **반응형 미리보기 도구 (responsive-tools.js)**
   - 주요 기능: 다양한 화면 크기에서 미리보기 제공
   - 구현 범위:
     - 데스크톱, 태블릿, 모바일 등 프리셋 화면 크기
     - 사용자 정의 화면 크기 지원
     - 가로/세로 모드 전환
     - 미리보기 창 크기 조절
   - 예상 소요 시간: 3-6시간

4. **코드 스니펫 기능 (snippets.js)**
   - 주요 기능: 자주 사용하는 코드 조각 저장 및 재사용
   - 구현 범위:
     - 스니펫 생성 및 저장
     - 카테고리별 분류
     - 검색 기능
     - 드래그 앤 드롭 삽입
   - 예상 소요 시간: 5-8시간

### 테스트 계획

- 각 기능별 단위 테스트 수행
- 브라우저 호환성 테스트 (Chrome, Firefox, Safari, Edge)
- 로컬 스토리지 제한 및 예외 상황 테스트
- 사용자 경험 테스트 (직관성, 응답성 확인)

## 참고사항
- 각 파일은 17kb를 초과하지 않도록 설계
- 각 기능은 모듈화하여 별도의 JavaScript 파일로 관리
- 로그 정보는 C:\Users\PC\Desktop\cursor\excel\func\logs에 저장
- 각 기능 구현 시 콘솔 로그를 남겨 디버깅 용이하게 설계